<!-- MHonArc v2.6.2 -->
<!--X-Subject: [Omaha.pm] Fwd: [olug] PortKnocker Script -->
<!--X-From-R13: Xnl Vnaanu <wnlNwnlf.arg> -->
<!--X-Date: Fri, 30 Apr 2004 19:18:07 &#45;0500 -->
<!--X-Message-Id: 31EBC823&#45;9B05&#45;11D8&#45;94E5&#45;000A95E317B8@jays.net -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>[Omaha.pm] Fwd: [olug] PortKnocker Script</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00122.html">Date Prev</a>][<a href="msg00124.html">Date Next</a>][<a href="msg00122.html">Thread Prev</a>][<a href="msg00125.html">Thread Next</a>][<a href="maillist.html#00123">Date Index</a>][<a href="threads.html#00123">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[Omaha.pm] Fwd: [olug] PortKnocker Script</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;'Omaha.pm'&quot; &lt;<a href="mailto:omaha-list@DOMAIN.HIDDEN">omaha-list@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: [Omaha.pm] Fwd: [olug] PortKnocker Script</li>
<li><em>From</em>: Jay Hannah &lt;<a href="mailto:jay@DOMAIN.HIDDEN">jay@xxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 30 Apr 2004 19:19:22 -0500</li>
<li><em>Sender</em>: <a href="mailto:owner-omaha-list@DOMAIN.HIDDEN">owner-omaha-list@xxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt><br>The June OLUG (Omaha Linux Users Group) meeting will be all about a 
couple Perl scripts.</tt><br>
<br>
<tt>   <a  href="http://olug.org/">http://olug.org/</a></tt><br>
<br>
<tt>Cheers,</tt><br>
<br>
<tt>j</tt><br>
<br>
<tt><br>Begin forwarded message:</tt><br>
<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin: 0em; padding-left: 1.0em"><pre style="margin: 0em;">From: Thom Harrison &lt;id4spam@xxxxxxx&gt;
Date: April 9, 2004 8:34:41 PM CDT
To: Omaha Linux User Group &lt;olug@xxxxxxxx&gt;
Subject: Re: [olug] PortKnocker Script
Reply-To: Omaha Linux User Group &lt;olug@xxxxxxxx&gt;</pre><br>
<tt><br>That'll be the June Olug meeting.</tt><br>
<br>
<tt>Thom</tt><br>
<br>
<tt>Thom Harrison wrote:</tt><br>
<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin: 0em; padding-left: 1.0em"><tt>Thanks Brian!</tt><br>
<br>
<tt>I'll be showing how to set this up at the July Olug meeting. I may 
have to come up with some other stuff to present to make the whole 
presentation last long enough.</tt><br>
<br>
<tt>Currently it's all on my laptop, which means connecting is a hit or 
miss proposition. I've made a couple of improvements though.</tt><br>
<br>
<pre style="margin: 0em;">-r--r--r-- 1 ftp ftp 268 Apr 9 05:50 knockserver.conf
-r--r--r-- 1 ftp ftp 9343 Apr 9 05:51 knockserver.new</pre><br>
<pre style="margin: 0em;">knockserver.conf defines a list of valid ports.
knockserver.new utilizes this list.</pre><br>
<tt>It's still called knockserver.new rather than knockserver because it 
hasn't gone through my rigorous Q&amp;A process yet. ;-)</tt><br>
<br>
<tt>I've got to swap out my KVM. Once I do, my ftp site should be more 
readily available. It'll be up all day today though.</tt><br>
<br>
<tt>Thom</tt><br>
<br>
<tt>Brian Wiese wrote:</tt><br>
<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin: 0em; padding-left: 1.0em"><tt>Thanks for sharing this with the list... I hope to get a chance to 
play<br>
with this soon!!! =)</tt><br>
<br>
<tt>Brian</tt><br>
<br>
<pre style="margin: 0em;">On Sat, 03 Apr 2004 10:47:11 -0600
Thom Harrison &lt;id4spam@xxxxxxx&gt; wrote:</pre><br>
<tt>|The Port Knocker scripts can be downloaded from my ftp site too. 
|They're in /knock<br>
|<br>
|linux:/srv/ftp/custom/cmds # ftp thom.homelinux.com<br>
|Connected to ip68-225-168-172.om.om.cox.net.<br>
|220 &quot;Welcome to Smopuim FTP service.&quot;<br>
|Name (thom.homelinux.com:root): ftp<br>
|331 Please specify the password.<br>
|Password: ftp$thom<br>
|230 Login successful.<br>
|Remote system type is UNIX.<br>
|Using binary mode to transfer files.<br>
|ftp&gt; cd knock<br>
|250 Directory successfully changed.<br>
|ftp&gt; dir<br>
|229 Entering Extended Passive Mode (|||11422|)<br>
|150 Here comes the directory listing.<br>
|-r--r--r-- 1 ftp ftp 2561 Jan 18 12:28 firewall<br>
|-r--r--r-- 1 ftp ftp 9437 Dec 10 13:38 knockclient<br>
|-r--r--r-- 1 ftp ftp 8773 Jan 17 21:02 knockserver<br>
|-r--r--r-- 1 ftp ftp 4438 Dec 10 13:38 lufshome<br>
|-r--r--r-- 1 ftp ftp 2705 Jan 17 21:01 sftphome<br>
|-r--r--r-- 1 ftp ftp 4332 Jan 19 01:10 sshhome<br>
|226 Directory send OK.<br>
|<br>
|The firewall script is to show the IPTABLES -P commands. The 
firewall |basically needs to set the defaults. The subsequent 
commands each allow |some kind of connection. This is required for 
the knockserver script to |add additional rules on the fly.<br>
|<br>
| &gt;From the server type: knockserver -f /var/log/messages<br>
|<br>
|You'll have to install some Perl Modules for this to work.<br>
|For instance, knockserver has the following lines:<br>
|<br>
|use File::Tail;<br>
|use Crypt::CBC;<br>
|use Schedule::At;<br>
|use Math::VecStat qw(sum);<br>
|use POSIX qw(strftime);<br>
|use Pod::Usage;<br>
|<br>
|Type the following:<br>
|<br>
|# cpan<br>
|cpan&gt; install File::Tail<br>
|cpan&gt; install Crypt::CBC<br>
|etc...<br>
|<br>
|I've got some scripts that will to the knocking from a client too. 
|They'll probably need modifying though. For instance, they're going 
to |try and connect to thom.homelinux.com<br>
|<br>
|Feel free to test the client by connecting to my server. You'll get 
an |ssh login (sorry ftp/ftp$thom won't work for ssh). Once you've 
verified |that, you'll probably want to change:<br>
|use constant KEY =&gt; &quot;5y%h^23b&quot;;<br>
|iv =&gt;&quot;l4725836&quot;,<br>
|That way you'll have your own superduper secret password. ( more 
secret |than mine anyway ). As I recall, I purposely used 8 distinct 
digits for |the iv #. Some special characters may also cause you 
trouble in the |password.<br>
|<br>
|Please let me know if you have any problems. And I'll update my 
notes.<br>
|<br>
|Thom<br>
|_______________________________________________<br>
|OLUG mailing list<br>
|OLUG@xxxxxxxx<br>
|<a  href="http://lists.olug.org/mailman/listinfo/olug">http://lists.olug.org/mailman/listinfo/olug</a><br>
|</tt><br>
<br>
</blockquote></blockquote></blockquote><tt></tt><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00122.html">[Omaha.pm] Fwd: [pm_groups] Addison Wesley/Prentice Hall User Groups Discount</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00124.html">RE: [Omaha.pm] PPM install issues</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00122.html">[Omaha.pm] Fwd: [pm_groups] Addison Wesley/Prentice Hall User Groups Discount</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00125.html">[Omaha.pm] FW: 20%-Off All Springer Books</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00123"><strong>Date</strong></a></li>
<li><a href="threads.html#00123"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
